<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NoteingHam - SOAP Note Assistant</title>
  <link rel="icon" type="image/png" href="ham.png" />
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Merriweather Regular for your app title -->
  <link
    href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400&display=swap"
    rel="stylesheet"
  />
  <style>
    body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #1e293b; overscroll-behavior-y: none; }
    .app-title { font-family: 'Merriweather', serif; font-weight: 400; }

    /* Your existing styles… */
    .form-input { @apply w-full border border-gray-200 rounded-md p-2 text-sm focus:border-gray-300 focus:ring-0; }
    .form-select { @apply w-full; } /* we'll override specifics via classes */
    /* …and everything else you've already added… */

    /* Force native <option> backgrounds white where possible */
    select.form-select,
    select.form-select option {
      background-color: #ffffff !important;
      color:            #1e293b     !important;
    }
    select.form-select {
      appearance:        none;
      -webkit-appearance: none;
      -moz-appearance:    none;
    }
  </style>
</head>
<body class="flex flex-col h-screen">

  <header class="bg-sky-700 text-white p-4 shadow-lg">
    <div class="container mx-auto flex justify-between items-center">
      <div class="flex items-center">
        <img src="logo_Noteingham.png" alt="NoteingHam Logo" class="h-12 w-12 mr-3" />
        <h1 class="app-title text-2xl md:text-3xl font-bold">NoteingHam</h1>
      </div>
      <button id="resetNoteButton"
              class="px-3 py-1.5 text-sm rounded-lg font-semibold shadow-md
                     transition-colors duration-150 ease-in-out
                     bg-sky-500 hover:bg-sky-400 text-white border border-sky-500 hover:border-sky-400">
        New Note / Reset
      </button>
    </div>
  </header>

  <div class="top-controls-bar container mx-auto">
    <div class="flex flex-wrap items-center justify-between gap-4">
      <!-- UI Density Controls -->
      <div class="flex items-center gap-2">
        <span class="text-sm font-medium text-slate-700">UI Density:</span>
        <button data-density="compact" class="btn-density px-2 py-1 text-xs rounded-lg font-semibold shadow-sm transition-colors duration-150 ease-in-out bg-white border border-slate-300 text-slate-700 hover:bg-slate-50">Compact</button>
        <button data-density="normal" class="btn-density px-2 py-1 text-xs rounded-lg font-semibold shadow-sm transition-colors duration-150 ease-in-out bg-sky-600 text-white hover:bg-sky-700 border-sky-600 active">Normal</button>
        <button data-density="expanded" class="btn-density px-2 py-1 text-xs rounded-lg font-semibold shadow-sm transition-colors duration-150 ease-in-out bg-white border border-slate-300 text-slate-700 hover:bg-slate-50">Expanded</button>
      </div>

      <!-- Profession Selector (NEW) -->
      <div class="flex items-center gap-2">
        <label for="professionSelect" class="text-sm font-medium text-slate-700">Role:</label>
        <select id="professionSelect"
                class="form-select w-36 border border-gray-300 rounded-md p-2 text-sm">
          <option value="therapist">Therapist</option>
          <option value="doctor">Doctor</option>
          <option value="dentist_osce">Dentist (OSCE)</option>
        </select>
      </div>

      <!-- Visible Sections Popover -->
      <div class="relative">
        <button id="toggleVisibleSectionsButton"
                class="px-3 py-1.5 text-sm rounded-lg font-semibold shadow-sm transition-colors duration-150 ease-in-out bg-white border border-slate-300 text-slate-700 hover:bg-slate-50">
          Visible Sections
        </button>
        <div id="visibleSectionsPopover">
          <h4 class="text-sm font-semibold mb-2 text-slate-700">Toggle Section Visibility</h4>
          <div id="visibleSectionsControlsContainer" class="space-y-1"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="flex-grow container mx-auto px-2 md:px-4 overflow-hidden main-content-area">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 h-full">
      <!-- Form Column -->
      <div id="formColumn" class="md:col-span-2 overflow-y-auto scrollable-panel pr-2 pb-24">
        <form id="soapNoteForm"></form>
      </div>

      <!-- Helper Panel (unchanged) -->
      <aside class="md:col-span-1 h-full flex flex-col helper-panel min-h-0">
        <!-- …your helper panel markup here… -->
      </aside>
    </div>
  </div>

  <footer class="bg-white shadow-upward p-3 border-t border-slate-200">
    <div class="container mx-auto flex flex-wrap justify-center md:justify-end items-center gap-2 md:gap-3">
      <button id="downloadNoteButton"
              class="px-3 py-1.5 text-sm rounded-lg font-semibold shadow-md transition-colors duration-150 ease-in-out bg-emerald-600 hover:bg-emerald-700 text-white border border-emerald-600 hover:border-emerald-700">
        Download Note (.doc)
      </button>

      <!-- Copy Note Button (NEW) -->
      <button id="copyNoteButton"
              class="px-3 py-1.5 text-sm rounded-lg font-semibold shadow-md transition-colors duration-150 ease-in-out bg-indigo-600 hover:bg-indigo-700 text-white border border-indigo-600 hover:border-indigo-700">
        Copy Note
      </button>

      <button id="downloadDraftButton" class="px-3 py-1.5 text-sm rounded-lg font-semibold shadow-md transition-colors duration-150 ease-in-out bg-amber-500 hover:bg-amber-600 text-white border border-amber-500 hover:border-amber-600">
        Download Draft (.json)
      </button>
      <button id="uploadDraftButton" class="px-3 py-1.5 text-sm rounded-lg font-semibold shadow-md transition-colors duration-150 ease-in-out bg-amber-500 hover:bg-amber-600 text-white border border-amber-500 hover:border-amber-600">
        Upload Draft (.json)
      </button>
      <input type="file" id="uploadDraftInput" accept=".json" style="display: none;"/>

      <button id="saveDraftButton" class="px-3 py-1.5 text-sm rounded-lg font-semibold shadow-md transition-colors duration-150 ease-in-out bg-sky-600 hover:bg-sky-700 text-white border border-sky-600 hover:border-sky-700">
        Save Draft (Local)
      </button>
      <button id="loadDraftButton" class="px-3 py-1.5 text-sm rounded-lg font-semibold shadow-md transition-colors duration-150 ease-in-out bg-slate-500 hover:bg-slate-600 text-white border border-slate-500 hover:border-slate-600">
        Load Draft (Local)
      </button>
      <button id="clearFormButton" class="px-3 py-1.5 text-sm rounded-lg font-semibold shadow-md transition-colors duration-150 ease-in-out bg-red-600 hover:bg-red-700 text-white border border-red-600 hover:border-red-700">
        Clear Entire Form
      </button>
    </div>
  </footer>

  <!-- Point to the updated script.js -->
  <script src="script.js" defer></script>
</body>
</html>
